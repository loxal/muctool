apiVersion: v1
kind: Secret
metadata:
    name: hcloud-csi
    namespace: kube-system
stringData:
    token: {{ .Values.app.HETZNER_API_TOKEN }}
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    name: storage
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: hcloud-volumes
---
kind: Pod
apiVersion: v1
metadata:
    name: test
spec:
    containers:
        - name: volume-storage-test
          image: busybox
          volumeMounts:
              - mountPath: "/mnt/persistence"
                name: storage-volume
          command: [ "sleep", "1000000" ]
    volumes:
        - name: storage-volume
          persistentVolumeClaim:
              claimName: storage